(dp1
S'output'
p2
S"<type 'exceptions.TypeError'> list indices must be integers, not str"
p3
sS'layer'
p4
S'/home/nexus/documents/web2py-master/applications/GrantProposal/controllers/default.py'
p5
sS'code'
p6
S"# -*- coding: utf-8 -*-\n\nimport json\nfrom gluon.storage import Storage\n\ndef index():\n    if not auth.is_logged_in(): # more permission checking in the future\n        redirect(URL('user/login'))\n    return dict(locals())\n\ndef user():\n    form = auth()\n    return dict(locals())\n\ndef display_form():\n    form=FORM('Your name:', INPUT(_name='name'), INPUT(_type='submit'))\n    return dict(form=form)\n\ndef create_proposal():\n    if not auth.is_logged_in():\n        redirect(URL('user/login'))\n\n    rows = db(db.proposal.owner_ == auth.user.id).select(db.proposal.ALL).as_list()\n    if len(rows) > 0:\n        # FIXME For now, only one proposal is permitted for each user.\n        redirect(URL('index'))\n\n#    db.proposal.owner_.writable = False\n#    db.proposal.owner_.readable = False\n    db.proposal.checklist.writable= False\n    db.proposal.checklist.readable = False\n    create_proposal=SQLFORM(db.proposal, rows)\n    if create_proposal.process().accepted:\n        redirect(URL('index'))\n        response.flash = 'form accepted'\n    elif create_proposal.errors:\n        response.flash = 'form has errors'\n    else:\n        response.flash = 'please fill out the form'\n    return dict(create_proposal=create_proposal)\n\ndef update_proposal():\n    if not auth.is_logged_in():\n        redirect(URL('user/login'))\n\n    record = db(db.proposal.owner_ == auth.user.id).select()\n#    update_form= auth.user.id\n    update_form = SQLFORM(db.proposal, record)\n    return dict(update_form=update_form)\n\nresponse._vars=response._caller(update_proposal)\n"
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "/home/nexus/documents/web2py-master/gluon/restricted.py", line 217, in restricted\n    exec ccode in environment\n  File "/home/nexus/documents/web2py-master/applications/GrantProposal/controllers/default.py", line 51, in <module>\n  File "/home/nexus/documents/web2py-master/gluon/globals.py", line 385, in <lambda>\n    self._caller = lambda f: f()\n  File "/home/nexus/documents/web2py-master/applications/GrantProposal/controllers/default.py", line 48, in update_proposal\n    update_form = SQLFORM(db.proposal, record)\n  File "/home/nexus/documents/web2py-master/gluon/sqlhtml.py", line 1097, in __init__\n    self.record_id = str(record[field.name])\n  File "/home/nexus/documents/web2py-master/gluon/dal.py", line 10767, in __getitem__\n    row = self.records[i]\nTypeError: list indices must be integers, not str\n'
p11
s.